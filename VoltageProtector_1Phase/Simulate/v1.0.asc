Version 4.1
SHEET 1 3400 2228
WIRE 576 -96 464 -96
WIRE 640 -96 576 -96
WIRE 720 -96 640 -96
WIRE 800 -96 720 -96
WIRE 928 -96 880 -96
WIRE 1008 -96 928 -96
WIRE 1104 -96 1008 -96
WIRE 224 -64 192 -64
WIRE 336 -64 304 -64
WIRE 464 -64 464 -96
WIRE 576 -64 576 -96
WIRE 2128 -16 2128 -80
WIRE 2128 -16 2032 -16
WIRE 2128 16 2128 -16
WIRE 2032 32 2032 -16
WIRE -160 64 -192 64
WIRE 192 64 192 -64
WIRE 192 64 -160 64
WIRE 240 64 192 64
WIRE 336 64 336 -64
WIRE 336 64 304 64
WIRE 464 64 464 0
WIRE 464 64 336 64
WIRE -192 96 -192 64
WIRE 640 128 640 -96
WIRE 928 128 928 -96
WIRE 1008 128 1008 -96
WIRE 2032 144 2032 96
WIRE 2128 144 2128 96
WIRE 2128 144 2032 144
WIRE 2128 224 2128 144
WIRE -192 272 -192 176
WIRE -112 272 -192 272
WIRE 128 272 -32 272
WIRE 368 272 208 272
WIRE 576 272 576 0
WIRE 576 272 368 272
WIRE 1904 272 1808 272
WIRE 2064 272 1984 272
WIRE 464 352 464 64
WIRE 576 352 576 272
WIRE 2128 400 2128 320
WIRE 464 464 464 416
WIRE 576 464 576 416
WIRE 576 464 464 464
WIRE 640 464 640 192
WIRE 640 464 576 464
WIRE 928 464 928 192
WIRE 928 464 640 464
WIRE 1008 464 1008 192
WIRE 1008 464 928 464
WIRE 1008 496 1008 464
WIRE 2128 512 2128 464
WIRE 48 672 48 608
WIRE 2144 720 2144 672
WIRE 1184 768 1120 768
WIRE 1328 768 1264 768
WIRE 48 800 48 752
WIRE 192 800 48 800
WIRE 336 800 256 800
WIRE 464 800 336 800
WIRE 560 800 464 800
WIRE 48 848 48 800
WIRE 336 848 336 800
WIRE 464 848 464 800
WIRE 2144 848 2144 800
WIRE 1216 944 1216 896
WIRE 336 960 336 928
WIRE 464 960 464 912
WIRE 1120 960 1120 768
WIRE 1120 960 1024 960
WIRE 1184 960 1120 960
WIRE 2496 960 2496 912
WIRE 48 976 48 928
WIRE 1328 976 1328 768
WIRE 1328 976 1248 976
WIRE 1440 976 1328 976
WIRE 1184 992 1024 992
WIRE 1952 1024 1888 1024
WIRE 2080 1024 2016 1024
WIRE 1216 1072 1216 1008
WIRE 2656 1072 2656 1024
WIRE 2080 1088 2080 1024
WIRE 2144 1088 2144 912
WIRE 2144 1088 2080 1088
WIRE 2624 1088 2144 1088
WIRE 2784 1104 2688 1104
WIRE 2960 1104 2784 1104
WIRE 3120 1104 3024 1104
WIRE 2496 1120 2496 1040
WIRE 2624 1120 2496 1120
WIRE 1952 1152 1888 1152
WIRE 2080 1152 2080 1088
WIRE 2080 1152 2016 1152
WIRE 2496 1168 2496 1120
WIRE 48 1184 48 1136
WIRE 3120 1184 3120 1104
WIRE 2656 1200 2656 1136
WIRE 1184 1232 1120 1232
WIRE 1328 1232 1264 1232
WIRE 2784 1248 2784 1104
WIRE 48 1296 48 1264
WIRE 176 1296 48 1296
WIRE 448 1296 176 1296
WIRE 2496 1296 2496 1248
WIRE 48 1328 48 1296
WIRE 176 1344 176 1296
WIRE 448 1360 448 1296
WIRE 1776 1360 1776 1312
WIRE 1232 1408 1232 1360
WIRE 2784 1408 2784 1312
WIRE 2784 1408 2448 1408
WIRE 1120 1424 1120 1232
WIRE 1120 1424 1024 1424
WIRE 1200 1424 1120 1424
WIRE 1328 1440 1328 1232
WIRE 1328 1440 1264 1440
WIRE 1440 1440 1328 1440
WIRE 48 1456 48 1392
WIRE 1200 1456 1024 1456
WIRE 176 1488 176 1424
WIRE 256 1488 176 1488
WIRE 448 1488 448 1440
WIRE 512 1488 448 1488
WIRE 1776 1488 1776 1440
WIRE 1936 1488 1776 1488
WIRE 176 1536 176 1488
WIRE 448 1536 448 1488
WIRE 1232 1536 1232 1472
WIRE 1776 1536 1776 1488
WIRE 2656 1600 2656 1552
WIRE 2144 1616 2144 1088
WIRE 2208 1616 2144 1616
WIRE 2352 1616 2352 1568
WIRE 2352 1616 2272 1616
WIRE 2448 1616 2448 1408
WIRE 2448 1616 2352 1616
WIRE 2624 1616 2448 1616
WIRE 2784 1632 2688 1632
WIRE 3120 1632 3120 1264
WIRE 3120 1632 2784 1632
WIRE 3264 1632 3120 1632
WIRE 1776 1648 1776 1600
WIRE 2624 1648 2560 1648
WIRE 176 1664 176 1616
WIRE 448 1664 448 1616
WIRE 2656 1728 2656 1664
WIRE 2448 1840 2448 1616
WIRE 2624 1840 2448 1840
WIRE 2784 1840 2784 1632
WIRE 2784 1840 2688 1840
FLAG -160 64 LINE
FLAG 368 272 NEUTRAL
FLAG 1104 -96 12V
IOPIN 1104 -96 Out
FLAG 48 608 LINE
FLAG 48 976 0
FLAG 336 960 0
FLAG 464 960 0
FLAG 560 800 AC_MEASURE
IOPIN 560 800 Out
FLAG 1216 896 12V
FLAG 1216 1072 0
FLAG 1024 992 AC_MEASURE
IOPIN 1024 992 In
FLAG 1232 1360 12V
FLAG 1232 1536 0
FLAG 1024 1424 AC_MEASURE
IOPIN 1024 1424 In
FLAG 176 1664 0
FLAG 48 1456 0
FLAG 48 1136 12V
FLAG 1008 496 0
FLAG 512 1488 REF_H
IOPIN 512 1488 Out
FLAG 1024 960 REF_H
IOPIN 1024 960 In
FLAG 1024 1456 REF_L
IOPIN 1024 1456 In
FLAG 256 1488 REF_L
IOPIN 256 1488 Out
FLAG 1440 976 STATUS_H
IOPIN 1440 976 Out
FLAG 1440 1440 STATUS_L
IOPIN 1440 1440 Out
FLAG 2128 -80 VDD
FLAG 2128 512 0
FLAG 1808 272 RELAY
IOPIN 1808 272 In
FLAG 2656 1552 12V
FLAG 2656 1728 0
FLAG 2656 1024 12V
FLAG 2656 1200 0
FLAG 1888 1024 STATUS_H
IOPIN 1888 1024 In
FLAG 1888 1152 STATUS_L
IOPIN 1888 1152 In
FLAG 2144 672 12V
FLAG 2496 1296 0
FLAG 2496 912 12V
FLAG 3264 1632 RELAY
IOPIN 3264 1632 Out
FLAG 448 1664 0
FLAG 2560 1648 REF_H
IOPIN 2560 1648 In
FLAG 1776 1648 0
FLAG 1776 1312 12V
FLAG 1936 1488 RC
IOPIN 1936 1488 Out
FLAG 2352 1568 RC
IOPIN 2352 1568 In
FLAG 720 -96 VDD
SYMBOL voltage -192 80 R0
WINDOW 0 41 43 Left 2
WINDOW 3 46 56 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 {Vrms*1.414} 50)
SYMBOL cap 240 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value 680n
SYMATTR SpiceLine V=400
SYMBOL res 208 -48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 470k
SYMBOL diode 480 0 R180
WINDOW 0 46 38 Left 2
WINDOW 3 47 10 Left 2
SYMATTR InstName D1
SYMBOL diode 480 416 R180
WINDOW 0 47 63 Left 2
WINDOW 3 47 35 Left 2
SYMATTR InstName D2
SYMBOL diode 592 0 R180
WINDOW 0 42 34 Left 2
WINDOW 3 43 7 Left 2
SYMATTR InstName D3
SYMBOL diode 592 416 R180
WINDOW 0 41 66 Left 2
WINDOW 3 44 38 Left 2
SYMATTR InstName D4
SYMBOL cap 624 128 R0
WINDOW 0 49 15 Left 2
WINDOW 3 44 38 Left 2
SYMATTR InstName C2
SYMATTR Value 220µ
SYMATTR SpiceLine V=50
SYMBOL zener 944 192 R180
WINDOW 0 48 37 Left 2
WINDOW 3 45 12 Left 2
SYMATTR InstName D5
SYMATTR Value BZX84C12L
SYMBOL res 784 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 330
SYMATTR SpiceLine pwr=2
SYMBOL cap 992 128 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL res 32 656 R0
SYMATTR InstName R2
SYMATTR Value 220k
SYMATTR SpiceLine tol=1 pwr=1/4
SYMBOL res 32 832 R0
SYMATTR InstName R3
SYMATTR Value 4k
SYMATTR SpiceLine tol=1 pwr=1/4
SYMBOL diode 192 816 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL res 320 832 R0
SYMATTR InstName R5
SYMATTR Value 120k
SYMBOL cap 448 848 R0
SYMATTR InstName C4
SYMATTR Value 22µ
SYMBOL MyLib\\OpAmp\\LM358 1216 912 R0
WINDOW 38 16 96 Invisible 2
SYMATTR InstName U1
SYMBOL MyLib\\OpAmp\\LM358 1232 1376 R0
WINDOW 38 16 96 Invisible 2
SYMATTR InstName U2
SYMBOL res 432 1344 R0
SYMATTR InstName R6
SYMATTR Value 4.7k
SYMBOL res 160 1328 R0
SYMATTR InstName R7
SYMATTR Value 6.8k
SYMBOL res 1280 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 470k
SYMBOL res 1280 1216 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1Meg
SYMBOL res 160 1520 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL zener 64 1392 R180
WINDOW 0 49 40 Left 2
WINDOW 3 49 16 Left 2
SYMATTR InstName D7
SYMATTR Value UMZ5_1N
SYMBOL res 32 1168 R0
SYMATTR InstName R11
SYMATTR Value 220
SYMBOL ind 2112 0 R0
WINDOW 3 36 80 Invisible 2
WINDOW 0 44 40 Left 2
SYMATTR Value 25m
SYMATTR InstName RELAY
SYMATTR SpiceLine Rser=400
SYMBOL npn 2064 224 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL diode 2048 96 R180
WINDOW 0 49 40 Left 2
WINDOW 3 48 16 Left 2
SYMATTR InstName D9
SYMATTR Value 1N4148
SYMBOL res 1888 288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL MyLib\\OpAmp\\LM358 2656 1568 R0
WINDOW 38 16 96 Invisible 2
SYMATTR InstName U3
SYMBOL MyLib\\OpAmp\\LM358 2656 1040 R0
WINDOW 38 16 96 Invisible 2
SYMATTR InstName U4
SYMBOL diode 2016 1008 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL diode 2016 1136 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D10
SYMATTR Value 1N4148
SYMBOL res 2128 704 R0
SYMATTR InstName R13
SYMATTR Value 4.7k
SYMBOL res 2480 944 R0
SYMATTR InstName R14
SYMATTR Value 150k
SYMATTR SpiceLine tol=5
SYMBOL res 2480 1152 R0
SYMATTR InstName R15
SYMATTR Value 470k
SYMATTR SpiceLine tol=5
SYMBOL diode 2800 1312 R180
WINDOW 0 49 40 Left 2
WINDOW 3 48 16 Left 2
SYMATTR InstName D11
SYMATTR Value 1N4148
SYMBOL res 3104 1168 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL diode 2688 1824 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D12
SYMATTR Value 1N4148
SYMBOL res 432 1520 R0
SYMATTR InstName R17
SYMATTR Value 470k
SYMBOL diode 2272 1600 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D13
SYMATTR Value 1N4148
SYMBOL cap 1760 1536 R0
SYMATTR InstName C5
SYMATTR Value 22µ
SYMBOL res 1760 1344 R0
SYMATTR InstName R18
SYMATTR Value 220K
SYMBOL LED 2128 848 R0
WINDOW 0 -121 13 Left 2
WINDOW 3 -60 35 Left 2
SYMATTR InstName LED_RED
SYMATTR Value LED
SYMBOL LED 2960 1120 R270
WINDOW 0 -33 27 VTop 2
WINDOW 3 -30 31 VBottom 2
SYMATTR InstName LED_YELLOW
SYMATTR Value LED
SYMBOL LED 2112 400 R0
WINDOW 0 -152 23 Left 2
WINDOW 3 -62 48 Left 2
SYMATTR InstName LED_GREEN
SYMATTR Value LED
SYMBOL voltage -16 272 R90
WINDOW 0 47 43 VRight 2
WINDOW 3 46 56 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 {DECR*1.414} 50 0 0 0 100)
SYMBOL voltage 112 272 R270
WINDOW 0 -47 45 VRight 2
WINDOW 3 46 56 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 {INCR*1.414} 50 8 0 0 100)
TEXT 2360 344 Left 2 !.tran 0 15 0 0.1
TEXT 1352 904 Left 2 ;Normal = High\nAbnormal = Low
TEXT 1352 1376 Left 2 ;Normal = High\nAbnormal = Low
TEXT 2024 472 Left 2 ;Green
TEXT 2072 904 Left 2 ;Red
TEXT 2936 1192 Left 2 ;Yellow
TEXT 1808 1432 Left 2 ;3.9Meg
TEXT 2360 376 Left 2 !.model LED D(IS=2e-19 N=2 RS=5 BV=30 IBV=1e-3)
TEXT 1880 1536 Left 2 ;.ic V(RC)=0
TEXT -152 144 Left 2 !.param Vrms=220
TEXT -120 224 Left 2 ;Reducer
TEXT 112 224 Left 2 ;Increaser
TEXT -152 344 Left 2 !.param DECR=70
TEXT 88 344 Left 2 !.param INCR=60
TEXT 856 208 Left 2 ;12V
TEXT 816 -40 Left 2 ;1W
